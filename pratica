#include <stdio.h>
#include <stdlib.h>
int alocaMatriz(int linha, int coluna){
    int ***matriz;
    matriz=(int***)malloc((linha*coluna)*sizeof(int**));
    if(matriz==NULL){
        printf("Memoria insuficiente!");
        exit(1);
    }
    else{
        return matriz;
    }
}

int mult(int **m1, int **m2, int a, int b, int c, int d){
int **m3[a][d], i, j, k, aux=0;
    if(b==c){
        for(i=0;i<a;i++){
            for(j=0;j<d;j++){
                for(k=0;k<b;k++){
                   aux += m1[i][j] * m2[i][j];
                }
            aux=**m3[i][j];
            printf("%d " , **(m3+i+j));
            }
        }
    }
    else{
        printf("Nao eh possivel multiplicar as matrizes");
        return 0;
    }
}

int main()
{
    int a, b, c, d;
    int i, j;
    int **m1[a][b], **m2[c][d], **m3[a][d];

        printf("Digite a quantidade de linhas da matriz 1: ");
        scanf("%d" , &a);
        printf("\nDigite a quantidade de colunas da matriz 1: ");
        scanf("%d" , &b);
        printf("\nDigite a quantidade de linhas da matriz 2: ");
        scanf("%d" , &c);
        printf("\nDigite a quantidade de colunas da matriz 2: ");
        scanf("%d" , &d);

        for(i=0;i<a;i++){
            for(j=0;j<b;j++){
                printf("\nDigite o valor %d %d da matriz 1: " , i+1, j+1);
                scanf("%d" , &m1[i][j]);
            }
        }

        alocaMatriz(a,b);

        for(i=0;i<c;i++){
            for(j=0;j<d;j++){
                printf("\nDigite o valor %d %d da matriz 2: " , i+1, j+1);
                scanf("%d" , &m2[i][j]);
            }
        }

        alocaMatriz(c,d);

        printf("---MATRIZ 1---");
        printf("\n");
        for(i=0;i<a;i++){
            for(j=0;j<b;j++){
                printf("%d " , **(m1+i+j));
            }
        }
        printf("\n");
        printf("---MATRIZ 2---");
        printf("\n");
        for(i=0;i<c;i++){
            for(j=0;j<d;j++){
                printf("%d " , **(m2+i+j));
            }
        }
        printf("\n");
        printf("---MATRIZ 3---");
        mult(**m1, **m2, a, b, c, d);
free(**m1);
free(**m2);
free(**m3);
return 0;
}
